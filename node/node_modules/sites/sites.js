let fs = require('fs')
let path = require('path')
let Sites = []
let sites = fs.readdirSync(path.join(__dirname+'/node_modules/'))
let ignore = [
	"marshydro.js",
	// "quickbloomlights.js"
]
let testing = false
if (testing) sites = ["testsiteignore.js"]
sites.forEach((site)=>{
	if(testing || (site.indexOf('ignore') < 0 && !ignore.includes(site))){
		Sites.push(
			require(site)
		)
	}
})

Sites.schemas = function(args){
	let schemas = []
	Sites.forEach(site=>{
		let loop = Object.keys(site.pages)
		loop.forEach(siteTarget=>{
			if(site.pages[siteTarget].schema){
				schemas.push(site.pages[siteTarget].schema)
			}
		})
	})
	return schemas
}

module.exports = Sites